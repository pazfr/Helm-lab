apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: video-statement-dev

namespace: app

generatorOptions:
  disableNameSuffixHash: true

resources:
- ../../base
- external-secret-patch.yaml

patches:
- path: ingress-patch.yaml
  target:
    kind: Ingress
    name: video-statement-ingress

configMapGenerator:
- name: video-statement-config
  literals:
  - SSL_CERT_CHAIN_SECRET_NAME=dev-eks-internal-services-ssl-ca-crt
  - KINESIS_STREAM_NAME=dev_purple_events
  - MULTIKOL_API_URL=https://api.multikol.co:9000/speech_to_text
  - AWS_DEFAULT_REGION=eu-central-1
  - IDENTITY_POOL_ID=eu-central-1:6d48067d-753f-4c32-ae14-14b9a153985b
  - GOOGLE_APPLICATION_CREDENTIALS=/app/credentials/gcp_credentials.json

images:
- name: 495947449196.dkr.ecr.eu-central-1.amazonaws.com/video_statement
  newTag: version_3.7.5_ede1e94_109

commonLabels:
  environment: dev
  version: "3.7.5"

commonAnnotations:
  environment: "development"
