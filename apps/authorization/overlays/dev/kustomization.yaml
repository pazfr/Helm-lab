apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: authorization-dev

namespace: app

generatorOptions:
  disableNameSuffixHash: true

resources:
- ../../base
- external-secret-patch.yaml

patches:
- path: ingress-patch.yaml
  target:
    kind: Ingress
    name: authorization-ingress

configMapGenerator:
- name: authorization-config
  literals:
  - CONSOLE_CLIENT_ID=172Tvy5Yrb3h4XMY3daz7Xr1vzY1gh
  - AUTH_DB_SCHEMA=eks_dev_authorization_375
  - AWS_DEFAULT_REGION=eu-central-1
  - ONBOARDING_CLIENT_ID=o28x29ywvGBnf22WLf8NDlKZg5oQDc
  - AUDIT_EVENTS_STREAM_NAME=dev_audit_events
  - ENABLE_DOCS=true
  - PORTAL_CLIENT_ID=0nqFGaPkYUhSbTU2Nm0Rylp0sbWaIM
  - ENABLE_HTTPS=true
  - SSL_CERT_CHAIN_SECRET_NAME=dev-eks-internal-services-ssl-ca-crt
  - ANALYTICS_EVENTS_STREAM_NAME=dev_audit_events
  - CHALLENGE_TOKEN_KEY=dd5ad3d8-8a35-4e86-92ce-4dfc72d05590
  - AUDIT_EVENTS_IS_FIRE_EVENT=true
  - ANALYTICS_EVENTS_IS_FIRE_EVENT=true
  - DB_SCHEMA=eks_dev_authorization_375

images:
- name: 495947449196.dkr.ecr.eu-central-1.amazonaws.com/authorization
  newTag: version_3.7.5_16f8647_254

commonLabels:
  environment: dev
  version: "3.7.5"

commonAnnotations:
  environment: "development"
