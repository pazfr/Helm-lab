apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: portal-qa375

namespace: app

resources:
  - ../../base
  - external-secret-patch.yaml

configMapGenerator:
  - name: portal-config
    literals:
      - CAPTCHA_SOLVED_DELAY=250
      - PYTHONPATH=server
      - REQUEST_TIMEOUT=300
      - AWS_REGION=eu-central-1
      - ENABLE_DOCS=false
      - CAPTCHA_AFTER_FAILED_LOGINS=3
      - CAPTCHA_ENABLED=1
      - SSL_CERT_CHAIN_SECRET_NAME=qa-internal-services-ssl-ca-crt
      - CAPTCHA_DOMAINS=purpleray.com
      - KINESIS_STREAM_NAME=test_purple_events
      - AWS_REGION_NAME=eu-central-1
      - IDENTITY_POOL_ID=eu-central-1:6d48067d-753f-4c32-ae14-14b9a153985b

patches:
  - path: ingress-patch.yaml
    target:
      kind: Ingress
      name: portal-ingress

commonLabels:
  environment: qa
