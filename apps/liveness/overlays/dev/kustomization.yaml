apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: liveness-dev

namespace: app

generatorOptions:
  disableNameSuffixHash: true

resources:
- ../../base
- external-secret-patch.yaml

patches:
- path: ingress-patch.yaml
  target:
    kind: Ingress
    name: liveness-ingress

configMapGenerator:
- name: liveness-config
  literals:
  - AWS_REGION=eu-central-1
  - INJECTION_DETECTION_SERVER_URL=https://liveness-injection-detection.dev-eks.internal-services:8443
  - SSL_CERT_CHAIN_SECRET_NAME=dev-eks-internal-services-ssl-ca-crt
  - MODE=saas
  - PRESENTATION_DETECTION_SERVER_URL=https://liveness-presentation-detection.dev-eks.internal-services:8443
  - AWS_DEFAULT_REGION=eu-central-1
  - ENABLE_ANALYTICS="true"

images:
- name: 495947449196.dkr.ecr.eu-central-1.amazonaws.com/liveness
  newTag: version_3.7.5_0cde208_29

commonLabels:
  environment: dev
  version: "3.7.5"

commonAnnotations:
  environment: "development"
